<!DOCTYPE html>

<html>
<head>
  <title>Hello</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="abcd.html">
                  abcd.lisp
                </a>
              
                
                <a class="source" href="boot.html">
                  boot.lisp
                </a>
              
                
                <a class="source" href="col.html">
                  col.lisp
                </a>
              
                
                <a class="source" href="div.html">
                  div.lisp
                </a>
              
                
                <a class="source" href="fft.html">
                  fft.lisp
                </a>
              
                
                <a class="source" href="lib.html">
                  lib.lisp
                </a>
              
                
                <a class="source" href="num.html">
                  num.lisp
                </a>
              
                
                <a class="source" href="sample.html">
                  sample.lisp
                </a>
              
                
                <a class="source" href="sym.html">
                  sym.lisp
                </a>
              
                
                <a class="source" href="weather.html">
                  weather.lisp
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-name">load</span> <span class="hljs-string">"../src/boot"</span>)
(<span class="hljs-name">reload</span> <span class="hljs-string">"../src/col"</span>)

(<span class="hljs-name">defthing</span> sym col
  (<span class="hljs-name">most</span> <span class="hljs-number">0</span>) (<span class="hljs-name">mode</span>) (<span class="hljs-name">_ent</span>) (<span class="hljs-name">_w</span>)
  (<span class="hljs-name">cnt</span> (<span class="hljs-name">make-hash-table</span>)))

(<span class="hljs-name">defmethod</span> add1 ((<span class="hljs-name">x</span> sym) y <span class="hljs-symbol">&amp;optional</span> (<span class="hljs-name">f</span> #'identity))
  (<span class="hljs-name">with-slots</span> (<span class="hljs-name">most</span> mode cnt ent) x
    (<span class="hljs-name">let*</span> ((<span class="hljs-name">y</span> (<span class="hljs-name">funcall</span> f y))
           (<span class="hljs-name">new</span> (<span class="hljs-name">incf</span> (<span class="hljs-name">gethash</span> y cnt <span class="hljs-number">0</span>))))
      (<span class="hljs-name">if</span> (<span class="hljs-name">&gt;</span> new most)
          (<span class="hljs-name">setf</span> _ent <span class="hljs-literal">nil</span>
                _w   <span class="hljs-literal">nil</span>
                most new
                mode x)))))</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="hello">Hello</h1>
<p>here  sfsdf dsf sdfsd sdf
sdfdsd
dfdfds
sdfsd</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
(<span class="hljs-name">defmethod</span> ready ((<span class="hljs-name">x</span> sym))
  (<span class="hljs-name">with-slots</span> (<span class="hljs-name">_ent</span> cnt n) x
    (<span class="hljs-name">unless</span> (<span class="hljs-name">not</span> (<span class="hljs-name">and</span>  _ent _w))
      (<span class="hljs-name">setf</span> _ent <span class="hljs-number">0</span>
            _w   <span class="hljs-literal">nil</span>)
      (<span class="hljs-name">dohash</span> (<span class="hljs-name">k</span> v cnt)
        (<span class="hljs-name">let</span> ((<span class="hljs-name">p</span> (<span class="hljs-name">/</span> v n)))
          (<span class="hljs-name">push</span> (<span class="hljs-name">cons</span> p k) _w)
          (<span class="hljs-name">decf</span> _ent (<span class="hljs-name">*</span> p (<span class="hljs-name">log</span> p <span class="hljs-number">2</span>)))))
      (<span class="hljs-name">setf</span> _w
            (<span class="hljs-name">sort</span> _w <span class="hljs-comment">; asdasdasas reverse the index</span>
                  #'(lambda (a b)
                      (&gt; (first a) (first b))))))))

(<span class="hljs-name">defun</span> ent ((<span class="hljs-name">x</span> sym))
  (<span class="hljs-name">update</span> x)
  (? x _ent))
  
(<span class="hljs-name">defun</span> sym* (<span class="hljs-name">lst</span> <span class="hljs-symbol">&amp;optional</span> (<span class="hljs-name">f</span> #'identity))
  (<span class="hljs-name">adds</span> (<span class="hljs-name">make-instance</span> 'sym) lst f))

(<span class="hljs-name">defmethod</span> copy ((<span class="hljs-name">old</span> sym))
  (<span class="hljs-name">with-slots</span> (<span class="hljs-name">cnt</span>) old
    (<span class="hljs-name">let</span> ((<span class="hljs-name">h</span>   (<span class="hljs-name">make-hash-table</span>))
          (<span class="hljs-name">new</span> (<span class="hljs-name">make-instance</span> 'sym)))
      (<span class="hljs-name">copier</span> old new n most mode _ent)
      (<span class="hljs-name">dohash</span> (<span class="hljs-name">k</span> v cnt new)
        (<span class="hljs-name">setf</span> (<span class="hljs-name">gethash</span> k (<span class="hljs-name">slot-value</span> new 'cnt))  v)))))

(<span class="hljs-name">defmethod</span> print-object ((<span class="hljs-name">x</span> sym) src)
  (<span class="hljs-name">with-slots</span> (<span class="hljs-name">n</span> most mode _ent cnt) x
    (<span class="hljs-name">format</span>
     src <span class="hljs-string">"~a"</span>
     `((n  . ,n) (most . ,most) (mode . ,mode)
       (_ent  . ,end) (cnt . ,(hash-table-count cnt))))))

(<span class="hljs-name">defmethod</span> any ((<span class="hljs-name">x</span> sym) <span class="hljs-symbol">&amp;aux</span> x1 x2 (<span class="hljs-name">w</span> <span class="hljs-number">1</span>))
  (<span class="hljs-name">ready</span> x)
  (<span class="hljs-name">while</span> (<span class="hljs-name">&gt;=</span> w <span class="hljs-number">1</span>)
      (<span class="hljs-name">setf</span> x1 (<span class="hljs-name">-</span> (<span class="hljs-name">*</span> <span class="hljs-number">2</span> (<span class="hljs-name">randf</span>) <span class="hljs-number">1</span>))
            x2 (<span class="hljs-name">-</span> (<span class="hljs-name">*</span> <span class="hljs-number">2</span> (<span class="hljs-name">randf</span>) <span class="hljs-number">1</span>))
            w  (<span class="hljs-name">+</span> (<span class="hljs-name">*</span> x1 x1) (<span class="hljs-name">*</span> x2 x2))))
  (<span class="hljs-name">with-slots</span> (<span class="hljs-name">mu</span> sd) x
    (<span class="hljs-name">+</span> mu (<span class="hljs-name">*</span> sd w x1 (<span class="hljs-name">sqrt</span> (<span class="hljs-name">/</span> (<span class="hljs-name">*</span> <span class="hljs-number">-2</span> (<span class="hljs-name">log</span> w)) w))))))</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
